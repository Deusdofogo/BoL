JCQkJZW5kCgkJCQllbmQKCQkJCUFkZENyZWF0ZU9iakNhbGxiYWNrKENhaXRseW5QYXJ0aWNsZSkKCQkJCUNhbGxiYWNrQ2FpdGx5bkFkZGVkID0gdHJ1ZQoJCQllbmQKCQkJaWYgSGVhZFNob3RQYXJ0aWNsZSBhbmQgSGVhZFNob3RQYXJ0aWNsZS52YWxpZCB0aGVuCgkJCQlCT05VUyA9IEJPTlVTICsgQUQgKiAxLjUKCQkJZW5kCgllbHNlaWYgbXlIZXJvLmNoYXJOYW1lID09ICdPcmlhbm5hJyB0aGVuCgkJQk9OVVMgPSBCT05VUyArIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UobWluaW9uLCAxMCArIDggKiAoKG15SGVyby5sZXZlbCAtIDEpICUgMykpCgllbHNlaWYgbXlIZXJvLmNoYXJOYW1lID09ICdUd2lzdGVkRmF0ZScgdGhlbgoJCQlpZiBub3QgVEZDYWxsYmFja0FkZGVkIHRoZW4KCQkJCWZ1bmN0aW9uIFRGUGFydGljbGUob2JqKQoJCQkJCWlmIEdldERpc3RhbmNlKG9iaikgPCAxMDAgYW5kIG9iai5uYW1lOmxvd2VyKCk6ZmluZCgiY2FyZG1hc3Rlcl9zdGFja3JlYWR5LnRyb3kiKSB0aGVuCgkJCQkJCVRGRVBhcnRpY2xlID0gb2JqCgkJCQkJZWxzZWlmIEdldERpc3RhbmNlKG9iaikgPCAxMDAgYW5kIG9iai5uYW1lOmxvd2VyKCk6ZmluZCgiY2FyZF9ibHVlLnRyb3kiKSB0aGVuCgkJCQkJCVRGV1BhcnRpY2xlID0gb2JqCgkJCQkJZW5kCgkJCQllbmQKCQkJCUFkZENyZWF0ZU9iakNhbGxiYWNrKFRGUGFydGljbGUpCgkJCQlURkNhbGxiYWNrQWRkZWQgPSB0cnVlCgkJCWVuZAoJCQlpZiBURkVQYXJ0aWNsZSBhbmQgVEZFUGFydGljbGUudmF