uY3Rpb24gU09XOk9yYldhbGsodGFyZ2V0LCBwb2ludCkKCXBvaW50ID0gcG9pbnQgb3Igc2VsZi5mb3JjZW9yYndhbGtwb3MKCWlmIHNlbGYuQXR0YWNrcyBhbmQgc2VsZjpDYW5BdHRhY2soKSBhbmQgc2VsZjpWYWxpZFRhcmdldCh0YXJnZXQpIGFuZCBub3Qgc2VsZjpCZWZvcmVBdHRhY2sodGFyZ2V0KSB0aGVuCgkJc2VsZjpBdHRhY2sodGFyZ2V0KQoJZWxzZWlmIHNlbGY6Q2FuTW92ZSgpIGFuZCBzZWxmLk1vdmUgdGhlbgoJCWlmIG5vdCBwb2ludCB0aGVuCgkJCWxvY2FsIE9CVGFyZ2V0ID0gR2V0VGFyZ2V0KCkgb3IgdGFyZ2V0CgkJCWlmIHNlbGYuTWVudS5Nb2RlID09IDEgb3Igbm90IE9CVGFyZ2V0IHRoZW4KCQkJCWxvY2FsIE12ID0gVmVjdG9yKG15SGVybykgKyA0MDAgKiAoVmVjdG9yKG1vdXNlUG9zKSAtIFZlY3RvcihteUhlcm8pKTpub3JtYWxpemVkKCkKCQkJCXNlbGY6TW92ZVRvKE12LngsIE12LnopCgkJCWVsc2VpZiBHZXREaXN0YW5jZVNxcihPQlRhcmdldCkgPiAxMDAqMTAwICsgbWF0aC5wb3coc2VsZi5WUDpHZXRIaXRCb3goT0JUYXJnZXQpLCAyKSB0aGVuCgkJCQlsb2NhbCBwb2ludCA9IHNlbGYuVlA6R2V0UHJlZGljdGVkUG9zKE9CVGFyZ2V0LCAwLCAyKm15SGVyby5tcywgbXlIZXJvLCBmYWxzZSkKCQkJCWlmIEdldERpc3RhbmNlU3FyKHBvaW50KSA8IDEwMCoxMDAgKyBtYXRoLnBvdyhzZWxmLlZQOkdldEhpdEJveChPQlRhcmdldCksIDIpIHRoZW4KCQkJCQlwb2ludCA9IFZlY3RvcihWZWN0b3IobXlIZXJvKSAtIHB