yMDApCgkJaWYgc2VsZjpWYWxpZFRhcmdldChjaGFtcGlvbikgYW5kICgoaGVhbHRoUmF0aW8gPT0gbmlsKSBvciBociA8IGhlYWx0aFJhdGlvKSB0aGVuCgkJCXJlc3VsdCA9IGNoYW1waW9uCgkJCWhlYWx0aFJhdGlvID0gaHIKCQllbmQKCWVuZAoKCXJldHVybiByZXN1bHQKZW5kCgpmdW5jdGlvbiBTT1c6RmFybShtb2RlLCBwb2ludCkKCWlmIG1vZGUgPT0gMSB0aGVuCgkJc2VsZi5FbmVteU1pbmlvbnM6dXBkYXRlKCkKCQlsb2NhbCB0YXJnZXQgPSBzZWxmOktpbGxhYmxlTWluaW9uKCkgb3Igc2VsZjpHZXRUYXJnZXQoKQoJCXNlbGY6T3JiV2Fsayh0YXJnZXQsIHBvaW50KQoJCXNlbGYubW9kZSA9IDEKCWVsc2VpZiBtb2RlID09IDIgdGhlbgoJCXNlbGYuRW5lbXlNaW5pb25zOnVwZGF0ZSgpCgkJc2VsZi5PdGhlck1pbmlvbnM6dXBkYXRlKCkKCQlzZWxmLkp1bmdsZU1pbmlvbnM6dXBkYXRlKCkKCgkJbG9jYWwgdGFyZ2V0ID0gc2VsZjpLaWxsYWJsZU1pbmlvbigpCgkJaWYgdGFyZ2V0IHRoZW4KCQkJc2VsZjpPcmJXYWxrKHRhcmdldCwgcG9pbnQpCgkJZWxzZWlmIG5vdCBzZWxmOlNob3VsZFdhaXQoKSB0aGVuCgoJCQlpZiBzZWxmOlZhbGlkVGFyZ2V0KHNlbGYubGFzdHRhcmdldCkgdGhlbgoJCQkJdGFyZ2V0ID0gc2VsZi5sYXN0dGFyZ2V0CgkJCWVsc2UKCQkJCXRhcmdldCA9IHNlbGY6VmFsaWRTdHVmZigpCgkJCWVuZAoJCQlzZWxmLmxhc3R0YXJnZXQgPSB0YXJnZXQKCQkJCgkJCXNlbGY6T3JiV2Fsayh0YXJnZXQsIHBvaW50KQoJCWV