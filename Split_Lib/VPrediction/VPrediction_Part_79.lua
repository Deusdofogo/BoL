pb24sIEhpdENoYW5jZSwgUG9zaXRpb24gPSBzZWxmOkdldEJlc3RDYXN0UG9zaXRpb24odGFyZ2V0LCBkZWxheSwgcmFkaXVzLCByYW5nZSwgc3BlZWQsIGZyb20sIGZhbHNlLCAibGluZSIpCgkJCWlmIEdldERpc3RhbmNlKGZyb20sIFBvc2l0aW9uKSA8IChyYW5nZSArIHJhZGl1cykgdGhlbgoJCQkJdGFibGUuaW5zZXJ0KHBvaW50cywgUG9zaXRpb24pCgkJCQl0YWJsZS5pbnNlcnQoUG9zaXRpb25zLCB7dW5pdCA9IHRhcmdldCwgSGl0Q2hhbmNlID0gSGl0Q2hhbmNlLCBQb3NpdGlvbiA9IFBvc2l0aW9uLCBDYXN0UG9zaXRpb24gPSBDYXN0UG9zaXRpb259KQoJCQllbmQKCQllbmQKCWVuZAoKCWxvY2FsIE1heEhpdCA9IDEKCWxvY2FsIE1heEhpdFBvcwoKCWlmICNwb2ludHMgPiAxIHRoZW4KCQlmb3IgaSwgY2FuZGlkYXRlIGluIGlwYWlycyhwb2ludHMpIGRvCgkJCWxvY2FsIEMxLCBDMiA9IEdldFBvc2libGVQb2ludHMoZnJvbSwgcG9pbnRzW2ldLCByYWRpdXMgLSAyMCwgcmFuZ2UpCgkJCWxvY2FsIGhpdHMsIE1Qb2ludHMxID0gQ291bnRIaXRzKGZyb20sIEMxLCByYWRpdXMsIHBvaW50cykKCQkJbG9jYWwgaGl0czIsIE1Qb2ludHMyID0gQ291bnRIaXRzKGZyb20sIEMyLCByYWRpdXMsIHBvaW50cykKCQkJaWYgaGl0cyA+PSBNYXhIaXQgdGhlbgoJCQkJTWF4SGl0UG9zID0gQzEKCQkJCU1heEhpdCA9IGhpdHMKCQkJCU1heEhpdFBvaW50cyA9IE1Qb2ludHMxCgkJCWVuZAoJCQlpZiBoaXRzMiA+PSBNYXhIaXQgdGhlbgoJCQkJTWF4SGl