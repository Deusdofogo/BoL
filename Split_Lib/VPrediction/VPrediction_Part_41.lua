5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIChidWZmLnR5cGUgPT0gQlVGRl9LTk9DS0JBQ0spIHRoZW4KCQlzZWxmLkRvbnRTaG9vdFt1bml0Lm5ldHdvcmtJRF0gPSBzZWxmOkdldFRpbWUoKSArIDEKCWVuZAplbmQKCmZ1bmN0aW9uIFZQcmVkaWN0aW9uOk9uRGFzaCh1bml0LCBkYXNoKQoJaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4KCQlkYXNoLmVuZFBvcyA9IGRhc2gudGFyZ2V0IGFuZCBkYXNoLnRhcmdldCBvciBkYXNoLmVuZFBvcwoJCWRhc2guc3RhcnRUID0gc2VsZjpHZXRUaW1lKCkgLSBHZXRMYXRlbmN5KCkvMjAwMAoJCWRhc2guZW5kVCA9IGRhc2guc3RhcnRUICsgZGFzaC5kdXJhdGlvbgoJCXNlbGYuVGFyZ2V0c0Rhc2hpbmdbdW5pdC5uZXR3b3JrSURdID0gZGFzaAoJCXNlbGYuRG9udFNob290VW50aWxOZXdXYXlwb2ludHNbdW5pdC5uZXR3b3JrSURdID0gdHJ1ZQoJZW5kCmVuZAoKZnVuY3Rpb24gVlByZWRpY3Rpb246T25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpCglpZiB1bml0IGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbgoJCWZvciBpLCBzIGluIGlwYWlycyhzZWxmLnNwZWxscykgZG8KCQkJaWYgc3BlbGwubmFtZTpsb3dlcigpID09IHMubmFtZSB0aGVuCgkJCQlzZWxmLlRhcmdldHNJbW1vYmlsZVt1bml0Lm5ldHdvcmtJRF0gPSBzZWxmOkdldFRpbWUoKSArIHMuZHVyYXRpb24KCQkJCXJldHVybgoJCQllbmQKCQllbmQKCgkJZm9yIGksIHMgaW4gaXBhaXJzKHNlbGYuYmxpbmtzKSBkbwoJCQlsb2N