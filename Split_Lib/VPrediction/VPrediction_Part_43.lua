mIHNwZWxsLm5hbWU6bG93ZXIoKSA9PSBzLm5hbWUgdGhlbgoJCQkJc2VsZi5Eb250U2hvb3QyW3VuaXQubmV0d29ya0lEXSA9IHNlbGY6R2V0VGltZSgpICsgcy5kdXJhdGlvbgoJCQkJcmV0dXJuCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gVlByZWRpY3Rpb246T25OZXdXYXlQb2ludHMoTmV0d29ya0lEKQoJbG9jYWwgb2JqZWN0ID0gb2JqTWFuYWdlcjpHZXRPYmplY3RCeU5ldHdvcmtJZChOZXR3b3JrSUQpCglpZiBvYmplY3QgYW5kIG9iamVjdC52YWxpZCBhbmQgb2JqZWN0Lm5ldHdvcmtJRCBhbmQgb2JqZWN0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbgoJCXNlbGYuRG9udFNob290VW50aWxOZXdXYXlwb2ludHNbTmV0d29ya0lEXSA9IGZhbHNlCgkJaWYgc2VsZi5UYXJnZXRzV2F5cG9pbnRzW05ldHdvcmtJRF0gPT0gbmlsIHRoZW4KCQkJc2VsZi5UYXJnZXRzV2F5cG9pbnRzW05ldHdvcmtJRF0gPSB7fQoJCWVuZAoJCWxvY2FsIFdheXBvaW50c1RvQWRkID0gV2F5UG9pbnRNYW5hZ2VyOkdldFdheVBvaW50cyhvYmplY3QpCgkJaWYgV2F5cG9pbnRzVG9BZGQgYW5kICNXYXlwb2ludHNUb0FkZCA+PSAxIHRoZW4KCQkJLS1bW1NhdmUgb25seSB0aGUgbGFzdCB3YXlwb2ludCAod2hlcmUgdGhlIHBsYXllciBjbGlja2VkKV1dCgkJCXRhYmxlLmluc2VydChzZWxmLlRhcmdldHNXYXlwb2ludHNbTmV0d29ya0lEXSwge3VuaXRwb3MgPSBWZWN0b3Iob2JqZWN0LnZpc2lvblBvcykgLCB3YXlwb2ludCA9IFdheXBvaW50c1RvQWRkWyN