pdGlvbikKCWZyb20gPSBmcm9tIGFuZCBWZWN0b3IoZnJvbSkgb3IgbXlIZXJvLnZpc2lvblBvcwoJCglpZiB1cGRhdGVtYW5hZ2VycyB0aGVuCgkJc2VsZi5FbmVteU1pbmlvbnMucmFuZ2UgPSByYW5nZSArIDUwMCAqIChkZWxheSArIHJhbmdlIC8gc3BlZWQpCgkJc2VsZi5KdW5nbGVNaW5pb25zLnJhbmdlID0gc2VsZi5FbmVteU1pbmlvbnMucmFuZ2UKCQlzZWxmLk90aGVyTWluaW9ucy5yYW5nZSA9IHNlbGYuRW5lbXlNaW5pb25zLnJhbmdlCgkJc2VsZi5FbmVteU1pbmlvbnM6dXBkYXRlKCkKCQlzZWxmLkp1bmdsZU1pbmlvbnM6dXBkYXRlKCkKCQlzZWxmLk90aGVyTWluaW9uczp1cGRhdGUoKQoJZW5kCgoJbG9jYWwgcmVzdWx0ID0gZmFsc2UKCWlmIF9HLlZQcmVkaWN0aW9uTWVudS5Db2xsaXNpb24uTWluaW9ucyB0aGVuCgkJZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5FbmVteU1pbmlvbnMub2JqZWN0cykgZG8KCQkJaWYgc2VsZjpDaGVja0NvbCh1bml0LCBtaW5pb24sIFBvc2l0aW9uLCBkZWxheSwgcmFkaXVzLCByYW5nZSwgc3BlZWQsIGZyb20sIGRyYXcpIHRoZW4KCQkJCWlmIG5vdCBkcmF3IHRoZW4KCQkJCQlyZXR1cm4gdHJ1ZQoJCQkJZWxzZQoJCQkJCXJlc3VsdCA9IHRydWUKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAoJCglpZiBfRy5WUHJlZGljdGlvbk1lbnUuQ29sbGlzaW9uLk1vYnMgdGhlbgoJCWZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuSnVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbwoJCQlpZiBzZWxmOkN