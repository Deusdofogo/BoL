gbXlIZXJvLnR5cGUgdGhlbgoJCXNlbGYuVGFyZ2V0c1Zpc2libGVbdW5pdC5uZXR3b3JrSURdID0gc2VsZjpHZXRUaW1lKCkKCWVuZAplbmQKCi0tW1tUcmFjayB3aGVuIHdlIGxvc2Ugb3IgZ2FpbiB2aXNpb24gb3ZlciBhbiBlbmVteV1dCmZ1bmN0aW9uIFZQcmVkaWN0aW9uOk9uTG9zZVZpc2lvbih1bml0KQoJaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4KCQlzZWxmLlRhcmdldHNWaXNpYmxlW3VuaXQubmV0d29ya0lEXSA9IG1hdGguaHVnZQoJZW5kCmVuZAoKZnVuY3Rpb24gVlByZWRpY3Rpb246T25HYWluQnVmZih1bml0LCBidWZmKQoJaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCAoYnVmZi50eXBlID09IEJVRkZfU1RVTiBvciBidWZmLnR5cGUgPT0gQlVGRl9ST09UIG9yIGJ1ZmYudHlwZSA9PSBCVUZGX0tOT0NLVVAgb3IgYnVmZi50eXBlID09IEJVRkZfU1VQUFJFU1MpIHRoZW4KCQlzZWxmLlRhcmdldHNJbW1vYmlsZVt1bml0Lm5ldHdvcmtJRF0gPSBzZWxmOkdldFRpbWUoKSArIGJ1ZmYuZHVyYXRpb24KCWVsc2VpZiB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIChidWZmLnR5cGUgPT0gQlVGRl9TTE9XIG9yIGJ1ZmYudHlwZSA9PSBCVUZGX0NIQVJNIG9yIGJ1ZmYudHlwZSA9PSBCVUZGX0ZFQVIgb3IgYnVmZi50eXBlID09IEJVRkZfVEFVTlQpIHRoZW4KCQlzZWxmLlRhcmdldHNTbG93ZWRbdW5pdC5uZXR3b3JrSURdID0gc2VsZjpHZXRUaW1lKCkgKyBidWZmLmR1cmF0aW9uCgllbmQKCglpZiB1bml0LnR