gc3BlZWQpIHRoZW4KCQkJcmV0dXJuIHRydWUKCQllbmQKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZAoKZnVuY3Rpb24gVlByZWRpY3Rpb246SXNEYXNoaW5nKHVuaXQsIGRlbGF5LCByYWRpdXMsIHNwZWVkLCBmcm9tKQoJbG9jYWwgVGFyZ2V0RGFzaGluZyA9IGZhbHNlCglsb2NhbCBDYW5IaXQgPSBmYWxzZQoJbG9jYWwgUG9zaXRpb24KCglpZiBzZWxmLlRhcmdldHNEYXNoaW5nW3VuaXQubmV0d29ya0lEXSB0aGVuCgkJbG9jYWwgZGFzaCA9IHNlbGYuVGFyZ2V0c0Rhc2hpbmdbdW5pdC5uZXR3b3JrSURdCgkJaWYgZGFzaC5lbmRUID49IHNlbGY6R2V0VGltZSgpIHRoZW4KCQkJVGFyZ2V0RGFzaGluZyA9IHRydWUKCQkJaWYgZGFzaC5pc2JsaW5rIHRoZW4KCQkJCWlmIChkYXNoLmVuZFQgLSBzZWxmOkdldFRpbWUoKSkgPD0gKGRlbGF5ICsgR2V0RGlzdGFuY2UoZnJvbSwgZGFzaC5lbmRQb3MpL3NwZWVkKSB0aGVuCgkJCQkJUG9zaXRpb24gPSBWZWN0b3IoZGFzaC5lbmRQb3MueCwgMCwgZGFzaC5lbmRQb3MueikKCQkJCQlDYW5IaXQgPSAodW5pdC5tcyAqIChkZWxheSArIEdldERpc3RhbmNlKGZyb20sIGRhc2guZW5kUG9zKS9zcGVlZCAtIChkYXNoLmVuZFQyIC0gc2VsZjpHZXRUaW1lKCkpKSkgPCByYWRpdXMKCQkJCWVuZAoKCQkJCWlmICgoZGFzaC5lbmRUIC0gc2VsZjpHZXRUaW1lKCkpID49IChkZWxheSArIEdldERpc3RhbmNlKGZyb20sIGRhc2guc3RhcnRQb3MpL3NwZWVkKSkgYW5kIG5vdCBDYW5IaXQgdGhlbgoJCQkJCVBvc2l0aW9uID0