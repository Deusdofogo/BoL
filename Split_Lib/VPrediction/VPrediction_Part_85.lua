QcmVkaWN0aW9uOk9uVGljaygpCgktLVtbRGVsZXRlIHRoZSBvbGQgc2F2ZWQgV2F5cG9pbnRzXV0KCWlmIHNlbGYubGFzdGljayA9PSBuaWwgb3Igc2VsZjpHZXRUaW1lKCkgLSBzZWxmLmxhc3RpY2sgPiAwLjIgdGhlbgoJCXNlbGYubGFzdGljayA9IHNlbGY6R2V0VGltZSgpCgkJZm9yIE5JRCwgVGFyZ2V0V2F5cG9pbnRzIGluIHBhaXJzKHNlbGYuVGFyZ2V0c1dheXBvaW50cykgZG8KCQkJbG9jYWwgaSA9IDEgCgkJCXdoaWxlIGkgPD0gI3NlbGYuVGFyZ2V0c1dheXBvaW50c1tOSURdIGRvCgkJCQlpZiBzZWxmLlRhcmdldHNXYXlwb2ludHNbTklEXVtpXVsidGltZSJdICsgc2VsZi5XYXlwb2ludHNUaW1lIDwgc2VsZjpHZXRUaW1lKCkgdGhlbgoJCQkJCXRhYmxlLnJlbW92ZShzZWxmLlRhcmdldHNXYXlwb2ludHNbTklEXSwgaSkKCQkJCWVsc2UKCQkJCQlpID0gaSArIDEKCQkJCWVuZAoJCQllbmQKCQllbmQKCgkJZm9yIGksIHVuaXQgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvCgkJCWZvciBqID0gMSwgdW5pdC5idWZmQ291bnQgZG8KCQkJCWxvY2FsIGJ1ZmYgPSB1bml0OmdldEJ1ZmYoaikKCQkJCWlmIGJ1ZmYudmFsaWQgYW5kIGJ1ZmYubmFtZSA9PSAiU3R1biIgdGhlbgoJCQkJCWlmIHNlbGYuVGFyZ2V0c0ltbW9iaWxlW3VuaXQubmV0d29ya0lEXSBhbmQgc2VsZi5UYXJnZXRzSW1tb2JpbGVbdW5pdC5uZXR3b3JrSURdIDwgc2VsZjpHZXRUaW1lKCkgdGhlbgoJCQkJCQlzZWxmLlRhcmdldHNJbW1vYmlsZVt1bml0Lm5ldHdvcmt