KCWxvY2FsIHJlc3VsdCA9IHt9Cglsb2NhbCByZW1haW5pbmcgPSBkaXN0YW5jZQoJaWYgZGlzdGFuY2UgPiAwIHRoZW4KCQlmb3IgaSA9IDEsICNXYXlwb2ludHMgLTEgZG8KCQkJbG9jYWwgQSwgQiA9IFdheXBvaW50c1tpXSwgV2F5cG9pbnRzW2kgKyAxXQoJCQlsb2NhbCBkaXN0ID0gR2V0RGlzdGFuY2UoQSwgQikKCQkJaWYgZGlzdCA+PSByZW1haW5pbmcgdGhlbgoJCQkJcmVzdWx0WzFdID0gVmVjdG9yKEEpICsgcmVtYWluaW5nICogKFZlY3RvcihCKSAtIFZlY3RvcihBKSk6bm9ybWFsaXplZCgpCgoJCQkJZm9yIGogPSBpICsgMSwgI1dheXBvaW50cyBkbwoJCQkJCXJlc3VsdFtqIC0gaSArIDFdID0gV2F5cG9pbnRzW2pdCgkJCQllbmQKCQkJCXJlbWFpbmluZyA9IDAKCQkJCWJyZWFrCgkJCWVsc2UKCQkJCXJlbWFpbmluZyA9IHJlbWFpbmluZyAtIGRpc3QKCQkJZW5kCgkJZW5kCgllbHNlCgkJbG9jYWwgQSwgQiA9IFdheXBvaW50c1sxXSwgV2F5cG9pbnRzWzJdCgkJcmVzdWx0ID0gV2F5cG9pbnRzCgkJcmVzdWx0WzFdID0gVmVjdG9yKEEpIC0gZGlzdGFuY2UgKiAoVmVjdG9yKEIpIC0gVmVjdG9yKEEpKTpub3JtYWxpemVkKCkKCWVuZAoKCXJldHVybiByZXN1bHQKZW5kCgpmdW5jdGlvbiBWUHJlZGljdGlvbjpHZXRDdXJyZW50V2F5UG9pbnRzKG9iamVjdCkKCWxvY2FsIHJlc3VsdCA9IHt9CgoJaWYgbm90IFZJUF9VU0VSIHRoZW4KCQlpZiBvYmplY3QuaGFzTW92ZVBhdGggdGhlbgoJCQl0YWJsZS5pbnNlcnQocmVzdWx0LCBWZWN0b3I