XYXlwb2ludHNUb0FkZF0sIHRpbWUgPSBzZWxmOkdldFRpbWUoKSwgbiA9ICNXYXlwb2ludHNUb0FkZH0pCgkJZW5kCgllbHNlaWYgb2JqZWN0IGFuZCBvYmplY3QudmFsaWQgYW5kIG9iamVjdC50eXBlIH49IG15SGVyby50eXBlIHRoZW4KCQlsb2NhbCBpID0gMQoJCXdoaWxlIGkgPD0gI3NlbGYuQWN0aXZlQXR0YWNrcyBkbwoJCQlpZiAoc2VsZi5BY3RpdmVBdHRhY2tzW2ldLkF0dGFja2VyIGFuZCBzZWxmLkFjdGl2ZUF0dGFja3NbaV0uQXR0YWNrZXIudmFsaWQgYW5kIHNlbGYuQWN0aXZlQXR0YWNrc1tpXS5BdHRhY2tlci5uZXR3b3JrSUQgPT0gTmV0d29ya0lEIGFuZCAoc2VsZi5BY3RpdmVBdHRhY2tzW2ldLnN0YXJ0dGltZSArIHNlbGYuQWN0aXZlQXR0YWNrc1tpXS53aW5kVXBUaW1lIC0gR2V0TGF0ZW5jeSgpLzIwMDApID4gc2VsZjpHZXRUaW1lKCkpIHRoZW4KCQkJCWxvY2FsIHdwdHMgPSBXYXlQb2ludE1hbmFnZXI6R2V0V2F5UG9pbnRzKG9iamVjdCkKCQkJCWlmICN3cHRzID4gMSB0aGVuCgkJCQkJdGFibGUucmVtb3ZlKHNlbGYuQWN0aXZlQXR0YWNrcywgaSkKCQkJCWVsc2UKCQkJCQlpID0gaSArIDEKCQkJCWVuZAoJCQllbHNlCgkJCQlpID0gaSArIDEKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBWUHJlZGljdGlvbjpJc0ltbW9iaWxlKHVuaXQsIGRlbGF5LCByYWRpdXMsIHNwZWVkLCBmcm9tLCBzcGVsbHR5cGUpCglpZiBzZWxmLlRhcmdldHNJbW1vYmlsZVt1bml0Lm5ldHdvcmtJRF0gdGhlbgoJCWxvY2FsIEV4dHJ