ubXMsIFZlY3Rvcihmcm9tLngsIGZyb20ueiksIHNwZWVkKQoJCQkJbG9jYWwgdEIgPSB0QSArIEQgLyB1bml0Lm1zCgkJCQl0MSwgdDIgPSAodDEgYW5kIHRBIDw9IHQxIGFuZCB0MSA8PSAodEIgLSB0QSkpIGFuZCB0MSBvciBuaWwsICh0MiBhbmQgdEEgPD0gdDIgYW5kIHQyIDw9ICh0QiAtIHRBKSkgYW5kIHQyIG9yIG5pbAoJCQkJdCA9IHQxIGFuZCB0MiBhbmQgbWF0aC5taW4odDEsIHQyKSBvciB0MSBvciB0MgoJCQkJaWYgdCB0aGVuCgkJCQkJQ2FzdFBvc2l0aW9uID0gdD09dDEgYW5kIFZlY3RvcihwMS54LCAwLCBwMS55KSBvciBWZWN0b3IocDIueCwgMCwgcDIueSkKCQkJCQlicmVhawoJCQkJZW5kCgkJCQl0QSA9IHRCCgkJCWVuZAoJCWVsc2UKCQkJdCA9IDAKCQkJQ2FzdFBvc2l0aW9uID0gVmVjdG9yKFdheXBvaW50c1sxXS54LCAwLCBXYXlwb2ludHNbMV0ueSkKCQllbmQKCgkJaWYgdCB0aGVuCgkJCWlmIChzZWxmOkdldFdheXBvaW50c0xlbmd0aChXYXlwb2ludHMpIC0gdCAqIHVuaXQubXMgLSByYWRpdXMpID49IDAgdGhlbgoJCQkJV2F5cG9pbnRzID0gc2VsZjpDdXRXYXlwb2ludHMoV2F5cG9pbnRzLCByYWRpdXMgKyB0ICogdW5pdC5tcykKCQkJCVBvc2l0aW9uID0gVmVjdG9yKFdheXBvaW50c1sxXS54LCAwLCBXYXlwb2ludHNbMV0ueSkKCQkJZWxzZQoJCQkJUG9zaXRpb24gPSBDYXN0UG9zaXRpb24KCQkJZW5kCgkJZWxzZWlmIHVuaXQudHlwZSB+PSBteUhlcm8udHlwZSB0aGVuCgkJCUNhc3RQb3NpdGlvbiA9IFZlY3Rvcih