KXV0KZnVuY3Rpb24gU3BlbGw6VHJhY2tDYXN0aW5nKHNwZWxsTmFtZSkKCiAgICBhc3NlcnQoc3BlbGxOYW1lLCAiU3BlbGw6VHJhY2tDYXN0aW5nKCk6IHNwZWxsTmFtZSBpcyBpbnZhbGlkISIpCiAgICBhc3NlcnQoc2VsZi5fX3RyYWNrZWRfc3BlbGxOYW1lcyA9PSBuaWwsICJTcGVsbDpUcmFja0Nhc3RpbmcoKTogVGhpcyBzcGVsbCBpcyBhbHJlYWR5IHRyYWNrZWQhIikKICAgIGFzc2VydCh0eXBlKHNwZWxsTmFtZSkgPT0gInN0cmluZyIgb3IgdHlwZShzcGVsbE5hbWUpID09ICJ0YWJsZSIsICJTcGVsbDpUcmFja0Nhc3RpbmcoKTogVHlwZSBvZiBzcGVsbE5hbWUgaXMgaW52YWxpZDogIiAuLiB0eXBlKHNwZWxsTmFtZSkpCgogICAgc2VsZi5fX3RyYWNrZWRfc3BlbGxOYW1lcyA9IHR5cGUoc3BlbGxOYW1lKSA9PSAidGFibGUiIGFuZCBzcGVsbE5hbWUgb3IgeyBzcGVsbE5hbWUgfQoKICAgIC0tIFJlZ2lzdGVyIGNhbGxiYWNrcwogICAgaWYgbm90IHNlbGYuX19wcm9jZXNzU3BlbGxDYWxsYmFjayB0aGVuCiAgICAgICAgQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6T25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkKICAgICAgICBzZWxmLl9fcHJvY2Vzc1NwZWxsQ2FsbGJhY2sgPSB0cnVlCiAgICBlbmQKCiAgICByZXR1cm4gc2VsZgoKZW5kCgotLVtbCiAgICBXaGVuIHRoZSBzcGVsbCBpcyBjYXN0ZWQgYW5kIGFib3V0IHRvIGhpdCBhIHRhcmdldCwgdGhpcyB3aWxsIHJldHVybiB0aGU