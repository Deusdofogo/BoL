sIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8KICAgICAgICBsb2NhbCBwb2ludFNlZ21lbnQsIHBvaW50TGluZSwgaXNPblNlZ21lbnQgPSBWZWN0b3JQb2ludFByb2plY3Rpb25PbkxpbmVTZWdtZW50KFN0YXJ0UG9zLCBFbmRQb3MsIG9iamVjdCkKICAgICAgICBpZiBpc09uU2VnbWVudCBhbmQgR2V0RGlzdGFuY2VTcXIocG9pbnRTZWdtZW50LCBvYmplY3QpIDwgd2lkdGggKiB3aWR0aCB0aGVuCiAgICAgICAgICAgIG4gPSBuICsgMQogICAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIG4KCmVuZAoKZnVuY3Rpb24gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24ocmFuZ2UsIHdpZHRoLCBvYmplY3RzKQoKICAgIGxvY2FsIEJlc3RQb3MgCiAgICBsb2NhbCBCZXN0SGl0ID0gMAogICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8KICAgICAgICBsb2NhbCBFbmRQb3MgPSBWZWN0b3IobXlIZXJvLnZpc2lvblBvcykgKyByYW5nZSAqIChWZWN0b3Iob2JqZWN0KSAtIFZlY3RvcihteUhlcm8udmlzaW9uUG9zKSk6bm9ybWFsaXplZCgpCiAgICAgICAgbG9jYWwgaGl0ID0gQ291bnRPYmplY3RzT25MaW5lU2VnbWVudChteUhlcm8udmlzaW9uUG9zLCBFbmRQb3MsIHdpZHRoLCBvYmplY3RzKQogICAgICAgIGlmIGhpdCA+IEJlc3RIaXQgdGhlbgogICAgICAgICAgICBCZXN0SGl0ID0gaGl0CiAgICAgICAgICAgIEJlc3RQb3MgPSBWZWN0b3Iob2JqZWN0KQogICAgICAgICAgICBpZiBCZXN0SGl0ID09ICNvYmplY3RzIHRoZW4KICA