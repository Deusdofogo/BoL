gICAgICAgICAgICAgaWYgaGVhZGVyID09IHAuaGVhZGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgY2FsbGJhY2sgaW4gaXBhaXJzKGNhbGxiYWNrVGFibGUpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIF9HLk9sZFNlbmRQYWNrZXQocCkKICAgICAgICBlbmQKICAgIGVuZAoKZW5kCgotLVtbCiAgICBIb29rIGludG8gYW4gaW5jb21pbmcgcGFja2V0LgoKICAgIEBwYXJhbSBoZWFkZXIgICB8IGludGVnZXIgIHwgSGVhZGVyIGlkIHRvIGhvb2sgaW50bwogICAgQHBhcmFtIGNhbGxiYWNrIHwgZnVuY3Rpb24gfCBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHBhY2tldCBpbiBiZWluZyByZWNlaXZlZApdXQpmdW5jdGlvbiBfUGFja2V0SGFuZGxlcjpIb29rSW5jb21pbmdQYWNrZXQoaGVhZGVyLCBjYWxsYmFjaykKCiAgICAtLSBQcmVjaGVjawogICAgaWYgbm90IHNlbGYuX19pbmNvbWluZ0NhbGxiYWNrc1toZWFkZXJdIHRoZW4KICAgICAgICBzZWxmLl9faW5jb21pbmdDYWxsYmFja3NbaGVhZGVyXSA9IHt9CiAgICBlbmQKCiAgICB0YWJsZS5pbnNlcnQoc2VsZi5fX2luY29taW5nQ2FsbGJhY2tzW2hlYWRlcl0sIGNhbGxiYWNrKQoKZW5kCgotLVtbCiAgICBIb29rIGludG8gYW4gb3V0Z29pbmcgcGFja2V0LgoKICAgIEBwYXJhbSBoZWFkZXIgICB8IGludGVnZXIgIHwgSGVhZGV