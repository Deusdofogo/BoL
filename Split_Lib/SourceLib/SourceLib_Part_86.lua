hcmdldCB8IENVbml0IHwgVGFyZ2V0IHVuaXQKXV0KZnVuY3Rpb24gX0l0ZW1NYW5hZ2VyOkNhc3RPZmZlbnNpdmVJdGVtcyh0YXJnZXQpCgogICAgZm9yIG5hbWUsIGl0ZW1kYXRhIGluIHBhaXJzKHNlbGYuaXRlbXMpIGRvCiAgICAgICAgbG9jYWwgaXRlbSA9IHNlbGY6R2V0SXRlbShuYW1lKQogICAgICAgIGlmIGl0ZW06SW5SYW5nZSh0YXJnZXQpIHRoZW4KICAgICAgICAgICAgaXRlbTpDYXN0KHRhcmdldCkKICAgICAgICBlbmQKICAgIGVuZAoKZW5kCgotLVtbCiAgICBHZXRzIHRoZSBpdGVtcyBieSBuYW1lLgoKICAgIEBwYXJhbSBuYW1lICAgfCBzdHJpbmcgfCBOYW1lIG9mIHRoZSBpdGVtIChub3QgdGhlIGluZ2FtZSBuYW1lLCB0aGUgbmFtZSB1c2VkIHdoZW4gcmVnaXN0ZXJpbmcsIGxpa2UgREZHKQogICAgQHBhcmFtIHJldHVybiB8IGNsYXNzICB8IEluc3RhbmNlIG9mIHRoZSBpdGVtIHRoYXQgd2FzIHJlcXVlc3RlZCBvciBuaWwgaWYgbm90IGZvdW5kCl1dCmZ1bmN0aW9uIF9JdGVtTWFuYWdlcjpHZXRJdGVtKG5hbWUpCiAgICBhc3NlcnQobmFtZSBhbmQgc2VsZi5pdGVtc1tuYW1lXSwgIkl0ZW1NYW5hZ2VyOiBJdGVtIG5vdCBmb3VuZCIpCiAgICBpZiBub3Qgc2VsZi5yZXF1ZXN0ZWRpdGVtc1tuYW1lXSB0aGVuCiAgICAgICAgc2VsZi5yZXF1ZXN0ZWRpdGVtc1tuYW1lXSA9IEl0ZW0oc2VsZi5pdGVtc1tuYW1lXS5pZCwgc2VsZi5pdGVtc1tuYW1lXS5yYW5nZSkKICAgIGVuZAogICAgcmV0dXJuIHNlbGYucmVxdWVzdGVkaXRlbXN