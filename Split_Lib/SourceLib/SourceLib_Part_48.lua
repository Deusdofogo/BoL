gICBzZWxmLl9fY2hhcmdlZF9jYXN0VGltZSAgICAgPSBvcy5jbG9jaygpCiAgICAgICAgICAgIHNlbGYuX19jaGFyZ2VkX2NvdW50ICAgICAgICA9IHNlbGYuX19jaGFyZ2VkX2NvdW50IGFuZCBzZWxmLl9fY2hhcmdlZF9jb3VudCArIDEgb3IgMQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbihjaGFyZ2VDb3VudCkKICAgICAgICAgICAgICAgIGlmIHNlbGYuX19jaGFyZ2VkX2NvdW50ID09IGNoYXJnZUNvdW50IHRoZW4KICAgICAgICAgICAgICAgICAgICBzZWxmOl9BYm9ydENoYXJnZSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kLCBzZWxmLl9fY2hhcmdlZF9kdXJhdGlvbiwgeyBzZWxmLl9fY2hhcmdlZF9jb3VudCB9KQogICAgICAgIGVuZAoKICAgIGVuZAoKZW5kCgotLVtbCiAgICBJbnRlcm5hbCBjYWxsYmFjaywgZG9uJ3QgdXNlIHRoaXMhCl1dCmZ1bmN0aW9uIFNwZWxsOk9uU2VuZFBhY2tldChwKQoKICAgIC0tIENoYXJnZWQgc3BlbGxzCiAgICBpZiBzZWxmLl9fY2hhcmdlZCB0aGVuCiAgICAgICAgaWYgcC5oZWFkZXIgPT0gMjI5IHRoZW4KICAgICAgICAgICAgaWYgb3MuY2xvY2soKSAtIHNlbGYuX19jaGFyZ2VkX2Nhc3RUaW1lIDw9IDAuMSB0aGVuCiAgICAgICAgICAgICAgICBwOkJsb2NrKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIHAuaGVhZGVyID09IFBhY2tldC5oZWFkZXJzLlNfQ0FTVCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHBhY2tldCA9IFBhY2tldChwKQogICAgICAgICA