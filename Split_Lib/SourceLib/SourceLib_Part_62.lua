wZGF0ZSB0aGUgcmFkaXVzIHdpdGggdGhlIHNwZWxsIHJhbmdlCiAgICAgICAgc2VsZi5yYWRpdXMgPSBzZWxmLl9saW5rZWRTcGVsbC5yYW5nZQogICAgZW5kCgogICAgLS0gTWVudSBmb3VuZAogICAgaWYgc2VsZi5tZW51IHRoZW4gCiAgICAgICAgaWYgc2VsZi5tZW51RW5hYmxlZCB+PSBuaWwgdGhlbgogICAgICAgICAgICBpZiBub3Qgc2VsZi5tZW51W3NlbGYubWVudUVuYWJsZWQudmFyXSB0aGVuIHJldHVybiBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBzZWxmLm1lbnVDb2xvciB+PSBuaWwgdGhlbgogICAgICAgICAgICBzZWxmLmNvbG9yID0gc2VsZi5tZW51W3NlbGYubWVudUNvbG9yLnZhcl0KICAgICAgICBlbmQKICAgICAgICBpZiBzZWxmLm1lbnVXaWR0aCB+PSBuaWwgdGhlbgogICAgICAgICAgICBzZWxmLndpZHRoID0gc2VsZi5tZW51W3NlbGYubWVudVdpZHRoLnZhcl0KICAgICAgICBlbmQKICAgICAgICBpZiBzZWxmLm1lbnVRdWFsaXR5IH49IG5pbCB0aGVuCiAgICAgICAgICAgIHNlbGYucXVhbGl0eSA9IHNlbGYubWVudVtzZWxmLm1lbnVRdWFsaXR5LnZhcl0KICAgICAgICBlbmQKICAgIGVuZAoKICAgIGxvY2FsIGNlbnRlciA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoc2VsZi5wb3NpdGlvbi54LCBzZWxmLnBvc2l0aW9uLnksIHNlbGYucG9zaXRpb24ueikpCiAgICBpZiBub3Qgc2VsZjpQb2ludE9uU2NyZWVuKGNlbnRlci54LCBjZW50ZXIueSkgYW5kIHNlbGYubW9kZSB+PSBDSVJDTEVfTUlOSU1BUCB0aGVuCiA