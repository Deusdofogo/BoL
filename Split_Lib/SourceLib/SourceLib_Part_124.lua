wb3MsIHJhbmdlLCByYWRpdXMsIG9iamVjdHMpCgogICAgbG9jYWwgbiA9IDAKICAgIGZvciBpLCBvYmplY3QgaW4gaXBhaXJzKG9iamVjdHMpIGRvCiAgICAgICAgaWYgX0dldERpc3RhbmNlU3FyKHBvcywgb2JqZWN0KSA8PSByYWRpdXMgKiByYWRpdXMgdGhlbgogICAgICAgICAgICBuID0gbiArIDEKICAgICAgICBlbmQKICAgIGVuZAoKICAgIHJldHVybiBuCgplbmQKCmZ1bmN0aW9uIEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihyYW5nZSwgcmFkaXVzLCBvYmplY3RzKQoKICAgIGxvY2FsIEJlc3RQb3MgCiAgICBsb2NhbCBCZXN0SGl0ID0gMAogICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8KICAgICAgICBsb2NhbCBoaXQgPSBDb3VudE9iamVjdHNOZWFyUG9zKG9iamVjdC52aXNpb25Qb3Mgb3Igb2JqZWN0LCByYW5nZSwgcmFkaXVzLCBvYmplY3RzKQogICAgICAgIGlmIGhpdCA+IEJlc3RIaXQgdGhlbgogICAgICAgICAgICBCZXN0SGl0ID0gaGl0CiAgICAgICAgICAgIEJlc3RQb3MgPSBWZWN0b3Iob2JqZWN0KQogICAgICAgICAgICBpZiBCZXN0SGl0ID09ICNvYmplY3RzIHRoZW4KICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZW5kCiAgICAgICAgIGVuZAogICAgZW5kCgogICAgcmV0dXJuIEJlc3RQb3MsIEJlc3RIaXQKCmVuZAoKZnVuY3Rpb24gQ291bnRPYmplY3RzT25MaW5lU2VnbWVudChTdGFydFBvcywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykKCiAgICBsb2NhbCBuID0gMAogICAgZm9yIGk